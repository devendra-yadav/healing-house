<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="ISO-8859-1">
	<title th:text="#{healing.house.title}"></title>
	<link rel="stylesheet" th:href="@{/cssandjs/bootstrap.min.css}"></link>
	<script type="text/javascript" th:src="@{/cssandjs/bootstrap.bundle.min.js}"></script>
	<link th:href="@{/cssandjs/datatables.min.css}" rel="stylesheet">
	<script th:src="@{/cssandjs/datatables.min.js}"></script>
	<script type="text/javascript">
	
		$(document).ready(function(){
			$("#patient-table").DataTable();
		})
	
	</script>
</head>
<body>
	<div th:insert="~{/fragments/header :: header}"></div>
	<div class="container text-center mb-5">
		<h2 th:text="${patient.name}"></h2>
		Patient ID : <span th:text="${patient.id}"/>
		<hr/>
		
		<a th:href="@{/treatment/select_treatment_form/{patient_id}(patient_id=${patient.id})}" class="btn btn-primary">Select Treatment</a>
		
		<table class="table table-striped text-start mt-2" id="patient-table">
			<thead>
				<tr>
					<th class="col-1">ID</th>
					<th class="col-1">Package</th>
					<th class="col-1">Start Date</th>
					<th class="col-1">Price</th>
					<th class="col-1">Total Sessions</th>
					<th class="col-1">Completed Sessions</th>
					<th class="col-1">Has Paid</th>
					<th class="col-2">Remarks</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="treatment: ${allTreatments}" >
					<td class="col-1" th:text="${treatment.id}"></td>
					<td class="col-1" th:text="${treatment.pkg.name}"></td>
					<td class="col-1" th:text="${#temporals.format(treatment.startDate,'dd-MMM-yyyy HH:mm')}"></td>
					<td class="col-1" th:text="${treatment.price}"></td>
					<td class="col-1" th:text="${treatment.totalSessions}"></td>
					<td class="col-1" th:text="${treatment.completedSessions}"></td>
					<td class="col-1">
						<span th:if="${treatment.hasPaid == true}">YES</span>
						<span th:if="${treatment.hasPaid == false}">
							NO 
							<span>
								<a class="btn btn-warning ml-2" th:href="@{'/treatment/pay/'+${patient.id}+'/'+${treatment.id}}">Pay</a>
							</span>
						</span>
						
					</td>
					<td class="col-2" th:text="${treatment.remarks}"></td>
				</tr>
			</tbody>
			
		</table>
		
	</div>
</body>
</html>